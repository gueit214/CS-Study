# React 18

## 1. Concurrency

- 렌더링 엔진 개선
- 사용자 경험 향상

→ React 동시성 Concurrency 도입

### 1.1 동시성 Concurrency

- 순서에 상관없이 동시에 수행될 수 있다
- 프로그램을 독립적으로 실행될 수 있는 여러 조각으로 나누어서 구조화하는 방식
- JavaScript는 싱글 스레드 언어 : 하나의 작업을 수행할 때 다른 작업을 동시에 수행할 수 없음.
- 동시성 Concurrency vs 비동기 Asynchronous
    - 비동기
        - 결과를 기다리지 않고 바로 다음 작업을 실행할 수 있게 하는 방식
    - 동시성
        - 싱글 코어(멀티 코어에서도 가능)에서 멀티스레드를 동작시키기 위한 방식
        - 멀티 태스킹을 위해 여러 개의 스레드가 번갈아 가면서 실행되는 방식
    
    ⇒ 동기와 비동기가 작업을 보내는 시작점에서 **작업을 기다릴지 말지**에 관한 개념
    
    ⇒ 동시성은 **여러 작업을 한꺼번에 다루는 것**과 관련된 개념
    

## 2. concurrent mode

동시성 도입

- 여러 작업을 동시에 할 수 있음

> 동시성은 여러 작업을 작은 단위로 나눈 뒤, 그들 간의 우선순위를 정하고 그에 따라 작업을 번갈아 수행하는 방법이다. 서로 다른 작업들이 실제로 동시에 수행되는 것은 아니지만, 작업 간의 전환이 매우 빠르게 이루어지면서 동시에 수행되는 것처럼 보이는 것이다. -[React 사용자 경험 개선기](https://tecoble.techcourse.co.kr/post/2021-07-24-concurrent-mode/)
> 

concurrent mode 동작 원리

> 특정 state가 변경되었을 때 **현재 UI를 유지**하고, 해당 변경에 따른 UI 업데이트를 동시에 준비한다. 준비 중인 UI의 렌더링 단계가 특정 조건에 부합하면 실제 DOM에 반영한다.
> 

### 2.1 concurrent mode 사용하기

- render 대신 createRoot를 사용

## 3. Automatic Batching

- 자동 배칭
    - 일괄 처리
    - 개별적으로 어떤 요청이 있을 때마다 실시간으로 통신하는 것이 아닌 한꺼번에 **일괄적으로** 처리
    - 여러 개의 state 업데이트를 하나의 리렌더링으로 묶는 것
- 기존 : 이벤트 핸들러 밖에서 발생하는 업데이트를 배칭하지 않아서 일관적이지 못함


### 3.1 자동 배칭 사용하기

- React 18의 createRoot를 통해, 모든 업데이트들은 어디서 왔는가와 무관하게 자동으로 배칭됨

## 4. Transitions

- 긴급하지 않은 UI 업데이트를 표시할 때 Transition을 사용
- 예를 들어 구글 검색창에 입력할 시
    - 입력 필드에 커서가 깜박이는 UI변화는 긴급한 것으로 취급함
    - 반면에 검색은 상대적으로 긴급하지 않다고 취급함
    - 검색 → transition으로 처리함
- 우선순위가 낮은 업데이트를 transition으로 표시해주면, React는 렌더링을 더 쉽게 최적화 하고, 업데이트의 우선 순위를 잘 매길 수 있게 됨.

### 4.1 Transition 사용하기


## 5. Suspense

- 기존의 문제로는…
    - 요청이 성공하는 경우에만 집중해 컴포넌트를 구성하기 어려움
    - 비동기 로직이 많아질수록 비즈니스 로직을 파악하기 점점 어려워짐
- **어떤 컴포넌트가 읽어야 하는 데이터가 아직 준비가 되지 않았다고 리액트에게 알려주는 새로운 매커니즘**
- 컴포넌트 렌더링을 어떤 작업이 끝날 때까지 잠시 중단시키고, 다른 컴포넌트를 먼저 렌더링할 수 있음

### 5.1 Suspense 사용하기

> 성공한 경우에만 집중할 수 있는   
> 로딩 상태와 에러 상태가 분리된    
> 동기처럼 사용할 수 있는

참고 자료 : [https://velog.io/@perfumellim/쉽게-떠먹여주는-React-18-업데이트](https://velog.io/@perfumellim/%EC%89%BD%EA%B2%8C-%EB%96%A0%EB%A8%B9%EC%97%AC%EC%A3%BC%EB%8A%94-React-18-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8)